<!DOCTYPE html>
<html>
<head>
    <title>Slots Payout Test</title>
    <style>
        body { font-family: Arial; background: #333; color: white; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; background: #444; border-radius: 5px; }
        .win { background: #006600; }
        .cheat { background: #660066; }
        button { background: #0066cc; color: white; border: none; padding: 10px; border-radius: 5px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸŽ° Slots Payout Test</h1>
    <p>Testing normal vs cheat payouts to ensure they're reasonable</p>
    
    <button onclick="testNormalSpins()">Test 10 Normal Spins</button>
    <button onclick="testCheatSpins()">Test 10 Cheat Spins</button>
    <button onclick="clearResults()">Clear Results</button>
    
    <div id="results"></div>

    <script>
        function addResult(text, type = 'normal') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = text;
            document.getElementById('results').appendChild(div);
        }

        function testNormalSpins() {
            addResult('<h3>ðŸŽ¯ Testing Normal Spins (No Cheats)</h3>');
            
            for (let i = 1; i <= 10; i++) {
                fetch('/api/slots/spin', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        Username: 'TestUser',
                        BetAmount: 10,
                        CheatActive: false
                    })
                })
                .then(r => r.json())
                .then(data => {
                    const result = data.win ? 
                        `Spin ${i}: WIN $${data.winAmount} (${data.multiplier}x) - ${data.result.join(', ')}` :
                        `Spin ${i}: Loss - ${data.result.join(', ')}`;
                    addResult(result, data.win ? 'win' : 'normal');
                })
                .catch(err => addResult(`Spin ${i}: ERROR - ${err.message}`, 'normal'));
            }
        }

        function testCheatSpins() {
            addResult('<h3>ðŸŽ¯ Testing Cheat Spins (Better Win Rate - Odds Boost)</h3>');
            
            for (let i = 1; i <= 10; i++) {
                fetch('/api/slots/spin', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        Username: 'CheatUser',
                        BetAmount: 10,
                        CheatActive: true,
                        CheatType: 'oddsBoost'
                    })
                })
                .then(r => r.json())
                .then(data => {
                    const result = data.win ? 
                        `Spin ${i}: WIN $${data.winAmount} (${data.multiplier}x) ${data.cheatBoosted ? 'ðŸŽ¯ BOOSTED' : ''} - ${data.result.join(', ')}` :
                        `Spin ${i}: Loss - ${data.result.join(', ')}`;
                    addResult(result, data.win ? 'cheat' : 'normal');
                })
                .catch(err => addResult(`Spin ${i}: ERROR - ${err.message}`, 'normal'));
            }
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
    </script>
</body>
</html>